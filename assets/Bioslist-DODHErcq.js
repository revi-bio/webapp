import{d as y,z as g,B as C,s as k,C as b,o as m,e as r,T as B,w as M,D as A,b as e,g as _,E,x as c,_ as w,q as x,F as D,G as V,r as h,H as S,a as v,I as $,l as j,J as H,K as L,j as F}from"./index-DCXiRpB3.js";import{_ as T}from"./Input.vue_vue_type_style_index_0_lang-rI-8FFou.js";import{u as z,_ as q}from"./BioPfp.vue_vue_type_script_setup_true_lang-DOvr0nV8.js";const I=y({__name:"Searchbar",props:g({basearray:{}},{modelValue:{},modelModifiers:{}}),emits:g(["filtered"],["update:modelValue"]),setup(f,{emit:i}){const o=C(f,"modelValue"),t=f,a=i;return k(o,u=>{if(!u){a("filtered",t.basearray);return}const d=t.basearray.filter(p=>p.name.toLowerCase().replace(/\s+/g,"").includes(u.toLowerCase().replace(/\s+/g,"")));a("filtered",d)}),(u,d)=>(m(),b(T,{class:"input",placeholder:"Search",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=p=>o.value=p),type:"text"},null,8,["modelValue"]))}}),N={class:"text-xl text-zinc-200"},U={class:"text-base text-zinc-300"},G=y({__name:"Modal",props:{show:{type:Boolean},primaryMsg:{},secondaryMsg:{}},emits:["close","delete"],setup(f,{emit:i}){return(o,t)=>(m(),b(V,{to:"body"},[r(B,{name:"nested"},{default:M(()=>[A(e("div",{onClick:t[4]||(t[4]=a=>o.$emit("close")),class:"w-full h-full z-[100] bg-zinc-950/50 flex flex-col justify-center content-center items-center absolute outer"},[e("div",{onClick:t[3]||(t[3]=_(()=>{},["stop"])),class:"w-1/3 h-1/3 bg-zinc-800 flex flex-col justify-center content-center items-center relative rounded-lg gap-2 modal-container inner"},[e("h3",N,c(o.primaryMsg),1),e("h3",U,c(o.secondaryMsg),1),t[5]||(t[5]=e("span",{class:"flex flex-col justify-center items-center content-center"},null,-1)),E(o.$slots,"default"),e("span",null,[r(w,{size:"normal","icon-position":"left","icon-type":"delete",text:"Delete",rank:"primary",onClick:t[0]||(t[0]=a=>o.$emit("delete"))})]),t[6]||(t[6]=e("h3",{class:"text-sm text-zinc-300 underline absolute left-3 bottom-3 cursor-pointer"},"Have any questions?",-1)),e("h3",{class:"text-base text-rose-400 absolute right-3 bottom-3 cursor-pointer",onClick:t[1]||(t[1]=a=>o.$emit("close"))}," Exit "),r(x,{type:"close",class:"text-red-400 absolute right-3 top-3 cursor-pointer",onClick:t[2]||(t[2]=a=>o.$emit("close"))})])],512),[[D,o.show]])]),_:3})]))}}),J={class:"flex flex-row justify-between w-full rounded-[16px] p-4 bg-zinc-700/50"},K={class:"flex flex-row space-x-4 items-center"},O={class:"flex flex-col"},R={class:"text-2xl text-zinc-100 w-full"},P={class:"text-md text-zinc-500"},Q={class:"flex space-x-1"},W={class:"stats"},X={class:"stats"},Y={class:"flex space-x-2 justify-evenly"},Z={class:"dates text-zinc-500"},ee={class:"text-zinc-600"},te={class:"dates text-zinc-500"},se={class:"text-zinc-600"},oe={class:"flex space-x-4 py-4"},ne=y({__name:"BioListItem",props:{name:{},handle:{},views:{},widgets:{},createdAt:{},updatedAt:{}},setup(f){const i=h(!1),o=z(),t=f,a=S();function u(){i.value=!0}function d(s){o.setCurrentHandle(s),a.push({name:"Editor",params:{handle:s}}),console.log("handle from params: ",s),console.log("handle from getCurrentHandle:",o.getCurrentHandle())}async function p(){try{await o.deleteBio(t.handle)&&(i.value=!1)}catch(s){console.error("Error deleting bio:",s),alert("An error occurred while deleting.")}}return(s,n)=>(m(),v($,null,[e("div",J,[e("div",K,[r(q,{class:"w-[64px] h-[64px]",bioHandle:s.handle},null,8,["bioHandle"]),e("div",O,[e("h3",R,c(s.name),1),e("h3",P,c(s.handle),1)]),e("div",Q,[e("div",W,[r(x,{type:"visibility",size:"4"}),e("h3",null,c(s.views),1)]),e("div",X,[r(x,{type:"widgets",size:"4"}),e("h3",null,c(s.widgets),1)])]),e("div",Y,[e("div",Z,[n[3]||(n[3]=e("h3",{class:"font-medium"},"Created at",-1)),e("h3",ee,c(s.createdAt),1)]),e("div",te,[n[4]||(n[4]=e("h3",{class:"font-medium"},"Last edited at",-1)),e("h3",se,c(s.updatedAt),1)])])]),e("div",oe,[r(w,{"icon-position":"left","icon-type":"delete",text:"Delete",rank:"primary",size:"small",onClick:n[0]||(n[0]=l=>u())}),r(w,{"icon-position":"left","icon-type":"edit",text:"Edit",rank:"primary",size:"small",onClick:n[1]||(n[1]=l=>d(s.handle))})])]),r(G,{show:i.value,onClose:n[2]||(n[2]=l=>i.value=!1),primaryMsg:`Delete ${s.name}?`,secondaryMsg:`Are you sure you want to delete ${s.handle}?`,showDeleteButton:!0,onDelete:p},null,8,["show","primaryMsg","secondaryMsg"])],64))}}),le={class:"w-full h-full flex flex-col space-y-6 p-6 pt-20"},ae={class:"flex flex-row justify-between content-center items-center w-full rounded-[16px] p-4 bg-zinc-700/50"},ie={class:"w-full h-full baseDash overflow-y-auto flex-col space-y-6"},ue=y({__name:"Bioslist",setup(f){const i=z(),o=h(""),t=h([]),a=h([]),u=async()=>{const s=prompt("Enter the name for the new bio:");if(!s)return;const n=prompt("Enter the handle for the new bio (e.g., @username):");if(!n)return;const l=await i.createBio(s,n);l&&(t.value.push(l),a.value=[...t.value],d(l.handle))},d=s=>{F.push({name:"Editor",params:{id:s}}),console.log(`Opening editor for bio with id: ${s}`)};function p(s){a.value=s}return j(async()=>{await i.fetchBios(),t.value=[...i.bios],a.value=[...t.value]}),H(()=>{t.value=[...i.bios],a.value=[...t.value]}),(s,n)=>(m(),v("div",le,[e("div",ae,[r(I,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=l=>o.value=l),basearray:t.value,onFiltered:p},null,8,["modelValue","basearray"]),r(w,{onClick:_(u,["prevent"]),rank:"primary",size:"small",text:"Create bio","icon-position":"right","icon-type":"add"})]),e("div",ie,[(m(!0),v($,null,L(a.value,l=>(m(),v("div",{key:l.handle},[r(ne,{name:l.name,handle:l.handle,views:l.views,widgets:l.widgets,createdAt:l.createdAt,updatedAt:l.updatedAt},null,8,["name","handle","views","widgets","createdAt","updatedAt"])]))),128))])]))}});export{ue as default};
